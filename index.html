<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyKanban - Task Management Board</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        :root {
            --todo-color: #dc3545;
            --in-progress-color: #ffc107;
            --done-color: #198754;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .app-header {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .app-title {
            color: #333;
            font-weight: 700;
            margin: 0;
            font-size: 2.5rem;
        }
        
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kanban-column {
            background: white;
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            min-height: 500px;
        }
        
        .column-header {
            padding: 20px;
            border-radius: 15px 15px 0 0;
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .column-header.todo {
            background: var(--todo-color);
        }
        
        .column-header.in-progress {
            background: var(--in-progress-color);
            color: #333;
        }
        
        .column-header.done {
            background: var(--done-color);
        }
        
        .task-count {
            background: rgba(255,255,255,0.3);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .column-content {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            min-height: 400px;
        }
        
        .task-card {
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: move;
        }
        
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .task-card.todo-border {
            border-left-color: var(--todo-color);
        }
        
        .task-card.in-progress-border {
            border-left-color: var(--in-progress-color);
        }
        
        .task-card.done-border {
            border-left-color: var(--done-color);
        }
        
        .task-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .task-description {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .task-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .btn-move, .btn-delete {
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-move {
            background: #0d6efd;
            color: white;
        }
        
        .btn-move:hover {
            background: #0b5ed7;
            transform: scale(1.05);
        }
        
        .btn-move:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .btn-delete {
            background: #dc3545;
            color: white;
        }
        
        .btn-delete:hover {
            background: #bb2d3b;
            transform: scale(1.05);
        }
        
        .add-task-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .form-title {
            color: #333;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .btn-add-task {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            transition: transform 0.2s;
        }
        
        .btn-add-task:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        @media (max-width: 768px) {
            .app-title {
                font-size: 1.8rem;
            }
            
            .kanban-board {
                grid-template-columns: 1fr;
            }
            
            .task-actions {
                flex-direction: column;
            }
            
            .btn-move, .btn-delete {
                width: 100%;
                justify-content: center;
            }
        }
        
        @media (max-width: 576px) {
            body {
                padding: 10px;
            }
            
            .app-header, .kanban-column, .add-task-form {
                border-radius: 10px;
            }
            
            .column-header {
                font-size: 1.1rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container app-container">
        <!-- Header -->
        <div class="app-header">
            <h1 class="app-title">
                <i class="bi bi-kanban"></i> MyKanban
            </h1>
            <p class="text-muted mb-0 mt-2">Kelola tugas Anda dengan mudah dan efisien</p>
        </div>
        
        <!-- Kanban Board -->
        <div class="kanban-board" id="kanbanBoard">
            <!-- To Do Column -->
            <div class="kanban-column">
                <div class="column-header todo">
                    <span><i class="bi bi-list-task"></i> To Do</span>
                    <span class="task-count" id="countTodo">0</span>
                </div>
                <div class="column-content" id="columnTodo" data-status="todo">
                    <!-- Tasks will be inserted here -->
                </div>
            </div>
            
            <!-- In Progress Column -->
            <div class="kanban-column">
                <div class="column-header in-progress">
                    <span><i class="bi bi-hourglass-split"></i> In Progress</span>
                    <span class="task-count" id="countInProgress">0</span>
                </div>
                <div class="column-content" id="columnInProgress" data-status="in-progress">
                    <!-- Tasks will be inserted here -->
                </div>
            </div>
            
            <!-- Done Column -->
            <div class="kanban-column">
                <div class="column-header done">
                    <span><i class="bi bi-check-circle"></i> Done</span>
                    <span class="task-count" id="countDone">0</span>
                </div>
                <div class="column-content" id="columnDone" data-status="done">
                    <!-- Tasks will be inserted here -->
                </div>
            </div>
        </div>
        
        <!-- Add Task Form -->
        <div class="add-task-form">
            <h3 class="form-title"><i class="bi bi-plus-circle"></i> Tambah Tugas Baru</h3>
            <form id="addTaskForm">
                <div class="mb-3">
                    <label for="taskTitle" class="form-label fw-bold">Judul Tugas</label>
                    <input type="text" class="form-control" id="taskTitle" placeholder="Masukkan judul tugas" required>
                </div>
                <div class="mb-3">
                    <label for="taskDescription" class="form-label fw-bold">Deskripsi</label>
                    <textarea class="form-control" id="taskDescription" rows="3" placeholder="Masukkan deskripsi tugas (opsional)"></textarea>
                </div>
                <button type="submit" class="btn btn-add-task w-100">
                    <i class="bi bi-plus-lg"></i> Tambah Tugas ke To Do
                </button>
            </form>
        </div>
    </div>
    
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Task Management Application
        class KanbanApp {
            constructor() {
                this.tasks = [];
                this.taskIdCounter = 1;
                this.init();
            }
            
            init() {
                // Load data from localStorage
                this.loadFromStorage();
                
                // Set up event listeners
                document.getElementById('addTaskForm').addEventListener('submit', (e) => this.handleAddTask(e));
                
                // Render initial tasks
                this.renderAllTasks();
                
                // Update task counters
                this.updateCounters();
            }
            
            // Load tasks from localStorage
            loadFromStorage() {
                const storedTasks = localStorage.getItem('mykanban_tasks');
                const storedCounter = localStorage.getItem('mykanban_counter');
                
                if (storedTasks) {
                    this.tasks = JSON.parse(storedTasks);
                }
                
                if (storedCounter) {
                    this.taskIdCounter = parseInt(storedCounter);
                }
            }
            
            // Save tasks to localStorage
            saveToStorage() {
                localStorage.setItem('mykanban_tasks', JSON.stringify(this.tasks));
                localStorage.setItem('mykanban_counter', this.taskIdCounter.toString());
            }
            
            // Handle form submission for adding new task
            handleAddTask(e) {
                e.preventDefault();
                
                const title = document.getElementById('taskTitle').value.trim();
                const description = document.getElementById('taskDescription').value.trim();
                
                if (!title) {
                    alert('Judul tugas harus diisi!');
                    return;
                }
                
                const newTask = {
                    id: this.taskIdCounter++,
                    title: title,
                    description: description,
                    status: 'todo',
                    createdAt: new Date().toISOString()
                };
                
                this.tasks.push(newTask);
                this.saveToStorage();
                this.renderAllTasks();
                this.updateCounters();
                
                // Reset form
                document.getElementById('addTaskForm').reset();
            }
            
            // Move task to different status
            moveTask(taskId, direction) {
                const task = this.tasks.find(t => t.id === taskId);
                if (!task) return;
                
                const statusOrder = ['todo', 'in-progress', 'done'];
                const currentIndex = statusOrder.indexOf(task.status);
                
                if (direction === 'next' && currentIndex < statusOrder.length - 1) {
                    task.status = statusOrder[currentIndex + 1];
                } else if (direction === 'prev' && currentIndex > 0) {
                    task.status = statusOrder[currentIndex - 1];
                }
                
                this.saveToStorage();
                this.renderAllTasks();
                this.updateCounters();
            }
            
            // Delete task
            deleteTask(taskId) {
                if (confirm('Apakah Anda yakin ingin menghapus tugas ini?')) {
                    this.tasks = this.tasks.filter(t => t.id !== taskId);
                    this.saveToStorage();
                    this.renderAllTasks();
                    this.updateCounters();
                }
            }
            
            // Render all tasks in their respective columns
            renderAllTasks() {
                // Clear all columns
                document.getElementById('columnTodo').innerHTML = '';
                document.getElementById('columnInProgress').innerHTML = '';
                document.getElementById('columnDone').innerHTML = '';
                
                // Filter tasks by status
                const todoTasks = this.tasks.filter(t => t.status === 'todo');
                const inProgressTasks = this.tasks.filter(t => t.status === 'in-progress');
                const doneTasks = this.tasks.filter(t => t.status === 'done');
                
                // Render tasks
                todoTasks.forEach(task => this.renderTask(task, 'columnTodo'));
                inProgressTasks.forEach(task => this.renderTask(task, 'columnInProgress'));
                doneTasks.forEach(task => this.renderTask(task, 'columnDone'));
                
                // Show empty state if no tasks
                if (todoTasks.length === 0) {
                    document.getElementById('columnTodo').innerHTML = '<div class="empty-state"><i class="bi bi-inbox"></i><p>Tidak ada tugas</p></div>';
                }
                if (inProgressTasks.length === 0) {
                    document.getElementById('columnInProgress').innerHTML = '<div class="empty-state"><i class="bi bi-hourglass"></i><p>Tidak ada tugas</p></div>';
                }
                if (doneTasks.length === 0) {
                    document.getElementById('columnDone').innerHTML = '<div class="empty-state"><i class="bi bi-check2-square"></i><p>Tidak ada tugas</p></div>';
                }
            }
            
            // Render a single task card
            renderTask(task, columnId) {
                const column = document.getElementById(columnId);
                const status = task.status;
                
                // Determine border class
                let borderClass = 'todo-border';
                if (status === 'in-progress') borderClass = 'in-progress-border';
                if (status === 'done') borderClass = 'done-border';
                
                // Create task card element
                const taskCard = document.createElement('div');
                taskCard.className = `task-card ${borderClass}`;
                taskCard.innerHTML = `
                    <div class="task-title">${this.escapeHtml(task.title)}</div>
                    ${task.description ? `<div class="task-description">${this.escapeHtml(task.description)}</div>` : ''}
                    <div class="task-actions">
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn-move" onclick="kanbanApp.moveTask(${task.id}, 'prev')" 
                                    ${status === 'todo' ? 'disabled' : ''} 
                                    title="Pindah ke kiri">
                                <i class="bi bi-arrow-left"></i> Sebelumnya
                            </button>
                            <button class="btn-move" onclick="kanbanApp.moveTask(${task.id}, 'next')" 
                                    ${status === 'done' ? 'disabled' : ''} 
                                    title="Pindah ke kanan">
                                Selanjutnya <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                        <button class="btn-delete" onclick="kanbanApp.deleteTask(${task.id})" title="Hapus tugas">
                            <i class="bi bi-trash"></i> Hapus
                        </button>
                    </div>
                `;
                
                column.appendChild(taskCard);
            }
            
            // Update task counters
            updateCounters() {
                const todoCount = this.tasks.filter(t => t.status === 'todo').length;
                const inProgressCount = this.tasks.filter(t => t.status === 'in-progress').length;
                const doneCount = this.tasks.filter(t => t.status === 'done').length;
                
                document.getElementById('countTodo').textContent = todoCount;
                document.getElementById('countInProgress').textContent = inProgressCount;
                document.getElementById('countDone').textContent = doneCount;
            }
            
            // Escape HTML to prevent XSS
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }
        
        // Initialize the application
        const kanbanApp = new KanbanApp();
    </script>
</body>
</html>

